<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Armah Flyer Maker</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        body {
            background-color: #222; /* Dark background to see the canvas better */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            font-family: sans-serif;
            color: white;
        }

        /* Controls Area */
        .controls {
            margin-bottom: 20px;
            text-align: center;
            background: #333;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        button {
            background: #C5A059;
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            text-transform: uppercase;
        }
        button:hover { background: #d4af37; }

        input[type="file"] {
            margin-bottom: 15px;
            display: block;
        }

        /* --- THE FLYER CANVAS (Hidden Scale) --- */
        /* We scale this down visually so you can see it, but it renders at full 1080x1920 */
        #preview-container {
            transform: scale(0.35); /* Scale down to fit screen */
            transform-origin: top center;
            border: 2px solid #555;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }

        #flyer {
            width: 1080px;
            height: 1920px;
            background-color: #FDFCF8; /* Warm Sand */
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 80px;
            box-sizing: border-box;
        }

        /* --- PARTICLES --- */
        .particle {
            position: absolute;
            border-radius: 50%;
            background: #C5A059;
            opacity: 0.3;
        }

        /* --- CONTENT --- */
        .logo-box {
            width: 350px;
            height: 350px;
            position: relative;
            margin-bottom: 80px;
        }

        /* The Gold Ring */
        .logo-ring {
            position: absolute;
            top: -20px; left: -20px; right: -20px; bottom: -20px;
            border: 3px dashed #C5A059;
            border-radius: 50%;
        }

        /* The Image */
        #flyer-logo {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 8px solid #fff;
            position: relative;
            z-index: 2;
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-size: 6rem; /* Huge for high res */
            color: #2A2A2A;
            margin: 0 0 40px 0;
            font-weight: 600;
            letter-spacing: 5px;
        }

        .separator {
            width: 150px;
            height: 4px;
            background: #C5A059;
            margin-bottom: 60px;
        }

        p.message {
            font-family: 'Lato', sans-serif;
            font-size: 2.2rem;
            color: #666666;
            line-height: 1.6;
            margin-bottom: 100px;
            font-weight: 300;
            max-width: 800px;
        }

        .signature {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            color: #C5A059;
            text-transform: uppercase;
            letter-spacing: 5px;
            font-weight: 600;
        }

    </style>
</head>
<body>

    <div class="controls">
        <h3 style="color:#C5A059; margin-top:0;">1. Upload Logo (Optional)</h3>
        <p style="font-size:0.8rem; color:#ccc; margin-bottom:10px;">(If the default doesn't load, upload it here)</p>
        <input type="file" accept="image/*" onchange="uploadLogo(this)">
        <br>
        <button onclick="downloadFlyer()">2. Download Flyer Image</button>
    </div>

    <div id="preview-container">
        <div id="flyer">
            <div id="particles-layer"></div>

            <div class="logo-box">
                <div class="logo-ring"></div>
                <img id="flyer-logo" src="https://firebasestorage.googleapis.com/v0/b/mealone-29b00.firebasestorage.app/o/WhatsApp%20Image%202026-01-09%20at%204.33.48%20PM.jpeg?alt=media&token=1db5149c-77d6-475e-9bbc-e8fc55bbb002" crossorigin="anonymous">
            </div>

            <h1>THANK YOU</h1>
            <div class="separator"></div>

            <p class="message">
                To all our wonderful friends and family who joined us to celebrate this special day.
                <br><br>
                Your presence, love, and generous gifts made the occasion truly unforgettable. Our hearts are full.
            </p>

            <p class="signature">
                With Love,<br>
                The Armah Family
            </p>
        </div>
    </div>

    <script>
        // 1. Generate Static Particles (So they look good in screenshot)
        const layer = document.getElementById('particles-layer');
        for(let i=0; i<30; i++) {
            let p = document.createElement('div');
            p.className = 'particle';
            let size = Math.random() * 60 + 20; // 20px to 80px
            p.style.width = size + 'px';
            p.style.height = size + 'px';
            p.style.left = Math.random() * 1080 + 'px';
            p.style.top = Math.random() * 1920 + 'px';
            layer.appendChild(p);
        }

        // 2. Allow User to Upload Logo (Fixes security/CORS issues)
        function uploadLogo(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('flyer-logo').src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // 3. Generate and Download
        function downloadFlyer() {
            const btn = document.querySelector('button');
            btn.innerHTML = "Generating...";
            
            const element = document.getElementById('flyer');

            html2canvas(element, {
                scale: 1, // Full 1080x1920 resolution
                useCORS: true, // Try to load external logo
                allowTaint: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'Armah_ThankYou_Flyer.png';
                link.href = canvas.toDataURL("image/png");
                link.click();
                btn.innerHTML = "2. Download Flyer Image";
            }).catch(err => {
                alert("If the logo is missing, please upload it using the 'Choose File' button first.");
                btn.innerHTML = "2. Download Flyer Image";
            });
        }
    </script>
</body>
</html>
